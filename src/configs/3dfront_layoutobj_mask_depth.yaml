wandb_offline: True

dir:
  output_dir: "logs_eschernet_3dfront_layoutobj_iodepth_1871_scene_maked_depth_nvsfinetune"
  logging_dir: "logs_eschernet_3dfront_layoutobj_iodepth_1871_scene_maked_depth_nvsfinetune"

model:
  layout_cfg: True
  params:
    n_layout_cls: 87
  T_in: 1
  T_in_val: 1
  T_out: 6
  use_depths_mask: True
  # base_model: /work/vig/hieu/escher/logs_eschernet_3dfront_layoutobj_iodepth_1871_scene_3m_final_rerender5m/pipeline-10000



data:
  target: data_modules.front3d_combine2.ConcatLayoutRCNFront3DDataModule
  params:
    datasets_cfg:
      - target: "data_modules.front3d_layout_obj.Front3DPoseObjLayout"
        params:
          train_dir: ""
          val_dir: "/work/vig/hieu/3dfront_data/images_100scenes_random_floor"
          train_depth_dir: "/work/vig/hieu/3dfront_data/depth_train_scenes_1871_path.json"
          val_depth_dir: "/work/vig/hieu/3dfront_data/depth_100scenes_random_floor"
          train_scene_ids: "/work/vig/hieu/3dfront_data/train_scenes_1871_path.json"
          val_scene_ids: "/work/vig/hieu/3dfront_data/val_scenes_19_100.json"
          graph_dir: "/work/vig/hieu/3dfront_data/graph_poses_all"
          layout_dir: "/work/vig/hieu/3dfront_data/layout_pcd_100scenes_random_floor"
          pose_dir: "/work/vig/hieu/3dfront_data/poses_all"
          obj_layout_dir: "/work/vig/hieu/3dfront_data/layouts"
          obj_layout_range: 10
    enable_remapping_cls: True
    layout_label_ids: '/work/vig/hieu/BlenderProc-3DFront/blenderproc/resources/front_3D/blender_label_mapping.csv'
    depth_tform_cfg:
      target: data_modules.data_utils.DepthLinearTransform
      params:
        min_depth: 0.0
        max_depth: 3.0
        clip: True
    batch_size: 8
    num_workers: 4
    image_strides: [8,16,32,64]
    cond_image_strides: [32]
    max_num_points: 20
    load_cond_depth: True
    load_target_depth: True
    n_cond_frames: 1
    n_target_frames: 6
    depths_mask_range: 2.5

training:
  gradient_accumulation_steps: 8
  checkpointing_steps: 500
  checkpoints_total_limit: 6
  max_train_steps: 15000
  skip_nan_loss: True
  zero_nan_grad: True

validation:
  validation_steps: 1000